<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8" />
    <title>Volpato AV2–AV6 — MT × Systems</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Спільні стилі MTU hub -->
    <link rel="stylesheet" href="mtu-hub.css" />

    <style>
        /* =========================
           1. Оболонка Volpato (в стилі LAIT / eTsecutive)
           ========================= */

        /* ===== оболонка калькулятора на світлому фоні ===== */

        .volpato-root {
            margin-top: 24px;
            border-radius: 28px;
            padding: 24px 24px 28px;
            background: #ffffff; /* Біла карта, як у TRIAL */
            border: 1px solid rgba(15, 23, 42, 0.06);
            box-shadow: 0 30px 80px rgba(15, 23, 42, 0.10);
            color: #0f172a; /* темний текст */
        }

        .volpato-root-title {
            font-size: 18px;
            font-weight: 600;
            margin: 0 0 10px;
            color: #0f172a;
        }

        .volpato-root-sub {
            margin: 0 0 18px;
            font-size: 13px;
            color: #6b7280;
            max-width: 680px;
        }

        /* 1 велика панель (форма) + 3 нижні (результат) */

        .volpato-calc-grid {
            display: grid;
            gap: 18px;
        }

        /* панелі всередині – теж світлі */

        .volpato-panel {
            border-radius: 20px;
            background: #f9fafb;
            border: 1px solid rgba(15, 23, 42, 0.08);
            box-shadow: 0 10px 30px rgba(15, 23, 42, 0.06);
            padding: 18px 20px;
            color: #0f172a;
        }
        .volpato-panel--inputs {
            grid-column: 1 / -1;
        }

        .volpato-results-wrapper {
            display: none;
        }
        .volpato-results-wrapper.active {
            display: block;
        }

        .volpato-results-grid {
            display: grid;
            grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.2fr) minmax(0, 1.3fr);
            gap: 16px;
        }
        @media (max-width: 900px) {
            .volpato-results-grid {
                grid-template-columns: 1fr;
            }
        }

        /* заголовки/пояснення */

        .volpato-panel-title {
            font-size: 15px;
            font-weight: 600;
            margin: 0 0 8px;
            color: #0f172a;
        }
        .volpato-panel-sub {
            margin: 0 0 12px;
            font-size: 12px;
            color: #6b7280;
        }


        /* =========================
           2. Форма (inputs)
           ========================= */

        .vp-form-grid {
            display: grid;
            grid-template-columns: minmax(0, 1.3fr) minmax(0, 1.1fr);
            gap: 16px;
            align-items: flex-start;
        }
        @media (max-width: 900px) {
            .vp-form-grid {
                grid-template-columns: 1fr;
            }
        }

        .vp-field-group {
            margin-bottom: 12px;
        }
        .vp-label-row {
            display: flex;
            align-items: baseline;
            justify-content: space-between;
            gap: 12px;
            margin-bottom: 4px;
        }
        .vp-label {
            font-size: 12px;
            font-weight: 500;
        }
        .vp-hint {
            font-size: 11px;
            color: #9ca3af;
            text-align: right;
        }

        .vp-input,
        .vp-select {
            width: 100%;
            border-radius: 10px;
            border: 1px solid rgba(148, 163, 184, 0.5);
            padding: 9px 11px;
            background: #ffffff;
            color: #0f172a;
            font-size: 13px;
            outline: none;
        }
        .vp-input::placeholder {
            color: #9ca3af;
        }
        .vp-input:focus,
        .vp-select:focus {
            border-color: #4f46e5;
            box-shadow: 0 0 0 1px rgba(79, 70, 229, 0.35);
        }


        .vp-row {
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 10px;
        }
        @media (max-width: 640px) {
            .vp-row {
                grid-template-columns: 1fr;
            }
        }

        /* бейджі, теги, чекбокси – під світлу тему */

        .vp-badge,
        .vp-tag {
            padding: 3px 9px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.4);
            font-size: 11px;
            color: #6b7280;
            background: #ffffff;
        }
        .vp-badge {
            padding: 3px 9px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.5);
            font-size: 11px;
            color: #9ca3af;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .vp-check-row {
            font-size: 12px;
            color: #374151;
        }
        .vp-check {
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        .vp-check input[type="checkbox"] {
            width: 14px;
            height: 14px;
            border-radius: 4px;
            border: 1px solid rgba(148, 163, 184, 0.8);
            background: #ffffff;
            appearance: none;
            position: relative;
        }
        .vp-check input[type="checkbox"]:checked {
            background: #22c55e;
            border-color: #22c55e;
        }
        .vp-check input[type="checkbox"]:checked::after {
            content: "";
            position: absolute;
            inset: 3px;
            border-radius: 3px;
            background: #0b1120;
        }

        .vp-mode-row {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }

        .vp-pill-btn {
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.7);
            background: transparent;
            color: #e5e7eb;
            padding: 5px 10px;
            font-size: 12px;
            cursor: pointer;
        }
        .vp-pill-btn.active {
            background: #22c55e;
            border-color: #22c55e;
            color: #0b1120;
        }

        .vp-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        /* кнопки – як у TRIAL: зелена основна + темно-сіра outline */

        .vp-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 9px 14px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.7);
            font-size: 13px;
            cursor: pointer;
            background: #ffffff;
            color: #111827;
            transition: background 0.12s ease-out, transform 0.06s ease-out,
            box-shadow 0.06s ease-out;
        }
        .vp-btn:hover {
            background: #e5e7eb;
            box-shadow: 0 4px 14px rgba(15, 23, 42, 0.15);
            transform: translateY(-0.5px);
        }

        .vp-btn-primary {
            background: #22c55e;
            border-color: #16a34a;
            color: #0b1120;
        }
        .vp-btn-primary:hover {
            background: #16a34a;
        }

        /* =========================
           3. Вивід результатів
           ========================= */

        .vp-row-text {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
            margin-top: 2px;
        }
        .vp-row-text small {
            color: #9ca3af;
        }

        .vp-strong {
            font-weight: 600;
            margin-top: 6px;
        }

        /* таблиця підсумків – світла */

        .vp-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 4px;
            font-size: 12px;
            color: #0f172a;
        }

        .vp-table th,
        .vp-table td {
            padding: 6px 8px;
            border-bottom: 1px solid rgba(209, 213, 219, 0.9);
        }

        .vp-table th {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.06em;
            color: #6b7280;
            text-align: left;
        }

        .vp-table td.vp-right {
            text-align: right;
        }
        .vp-tag {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 2px 8px;
            border-radius: 999px;
            border: 1px solid rgba(148, 163, 184, 0.6);
            font-size: 11px;
            color: #9ca3af;
            margin-right: 6px;
        }

        .hero-content {
            max-width: 56%;
        }

        .hero-image {
            position: relative;
            overflow: hidden;
            border-radius: 24px;
            width: 100%;
            flex: 0 0 auto;
        }

        .hero-image img {
            width: 100%;
            height: auto;
            display: block;
            transition: transform 0.45s ease, opacity 0.45s ease;
            transform-origin: center;
            border-radius: 24px;
            box-shadow: 0 10px 28px rgba(15,23,42,0.3);
        }

        .hero-image:hover img {
            transform: scale(1.05);
            opacity: 0.96;
        }
        /* =========================
   4. VOLPATO — DARK THEME
   ========================= */

        body.dark-theme .volpato-root {
            background: radial-gradient(circle at top left, #1f2937 0, #020617 45%, #020617 100%);
            border-color: rgba(148, 163, 184, 0.45);
            box-shadow: 0 40px 120px rgba(15, 23, 42, 0.9);
            color: #e5e7eb;
        }

        body.dark-theme .volpato-root-title {
            color: #e5e7eb;
        }

        body.dark-theme .volpato-root-sub {
            color: #9ca3af;
        }

        body.dark-theme .volpato-panel {
            background: rgba(15, 23, 42, 0.96);
            border-color: rgba(148, 163, 184, 0.55);
            box-shadow: 0 24px 80px rgba(15, 23, 42, 0.95);
            color: #e5e7eb;
        }

        body.dark-theme .volpato-panel-title {
            color: #e5e7eb;
        }

        body.dark-theme .volpato-panel-sub {
            color: #9ca3af;
        }

        body.dark-theme .vp-label {
            color: #e5e7eb;
        }

        body.dark-theme .vp-hint {
            color: #94a3b8;
        }

        body.dark-theme .vp-input,
        body.dark-theme .vp-select {
            background: #020617;
            color: #e5e7eb;
            border-color: rgba(148, 163, 184, 0.7);
        }

        body.dark-theme .vp-input::placeholder {
            color: #64748b;
        }

        body.dark-theme .vp-input:focus,
        body.dark-theme .vp-select:focus {
            border-color: #4f46e5;
            box-shadow: 0 0 0 1px rgba(79, 70, 229, 0.6);
        }

        body.dark-theme .vp-row-text small {
            color: #94a3b8;
        }

        body.dark-theme .vp-table {
            color: #e5e7eb;
        }

        body.dark-theme .vp-table th {
            color: #9ca3b8;
            border-bottom-color: rgba(51, 65, 85, 0.9);
        }

        body.dark-theme .vp-table td {
            border-bottom-color: rgba(30, 64, 175, 0.6);
        }

        body.dark-theme .vp-tag {
            border-color: rgba(148, 163, 184, 0.8);
            color: #cbd5f5;
        }

        body.dark-theme .vp-pill-btn {
            background: rgba(15, 23, 42, 0.9);
            border-color: rgba(148, 163, 184, 0.6);
            color: #e5e7eb;
        }

        body.dark-theme .vp-pill-btn.active {
            background: #22c55e;
            border-color: #22c55e;
            color: #052e16;
        }

        /* =========================
   VOLPATO · ТЕХНІЧНІ ПАРАМЕТРИ
   ========================= */

        .vt-section {
            padding: 0 0 56px;
        }

        .vt-inner {
            max-width: 1120px;
            margin: 0 auto;
            padding: 32px 28px 30px;
            border-radius: 28px;
            background: rgba(255,255,255,0.98);
            box-shadow: 0 18px 40px rgba(15,23,42,0.08);
        }

        .dark-theme .vt-inner {
            background: linear-gradient(145deg, #0f172a 0%, #111827 70%);
            box-shadow: 0 18px 38px rgba(0,0,0,0.6);
            color: #e5e7eb;
        }

        .vt-title {
            font-size: 24px;
            font-weight: 700;
            letter-spacing: -0.03em;
            margin-bottom: 4px;
        }

        .vt-sub {
            font-size: 14px;
            color: #4b5563;
            margin-bottom: 24px;
            max-width: 640px;
        }
        .dark-theme .vt-sub {
            color: #9ca3af;
        }

        .vt-grid {
            display: grid;
            grid-template-columns: minmax(0, 1.3fr) minmax(0, 1.1fr);
            gap: 28px;
            align-items: flex-start;
        }

        .vt-left-block {
            border-radius: 20px;
            background: #f9fafb;
            padding: 18px 18px 16px;
            margin-bottom: 14px;
        }

        .dark-theme .vt-left-block {
            background: #1e293b;
            border: 1px solid rgba(255,255,255,0.08);
        }


        .vt-kicker {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            font-weight: 600;
            color: #6b7280;
            margin-bottom: 6px;
        }
        .dark-theme .vt-kicker {
            color: #9ca3af;
        }

        .vt-color-line {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }
        .vt-swatch {
            width: 20px;
            height: 20px;
            border-radius: 999px;
            border: 1px solid rgba(15,23,42,0.25);
            background: #24232b; /* базовий чорний */
        }

        .vt-subtitle {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .vt-list {
            list-style: none;
            padding: 0;
            margin: 0;
            font-size: 13px;
            color: #4b5563;
        }
        .vt-list li + li {
            margin-top: 3px;
        }
        .dark-theme .vt-list {
            color: #e5e7eb;
        }

        .vt-note {
            font-style: italic;
            opacity: 0.8;
        }

        /* ПРАВА ЧАСТИНА (серії) */

        .vt-gallery {
            display: grid;
            grid-template-columns: repeat(2, minmax(0,1fr));
            gap: 12px;
            margin-bottom: 16px;
        }

        .vt-card {
            position: relative;
            border-radius: 16px;
            padding: 8px 8px 10px;
            background: rgba(249,250,251,0.98);
            border: 1px solid rgba(148,163,184,0.5);
            box-shadow: 0 10px 22px rgba(15,23,42,0.06);
            cursor: pointer;
            text-align: left;
            transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease, background .12s ease;
        }
        .vt-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 14px 30px rgba(15,23,42,0.12);
        }
        .vt-card.vt-card-active {
            border-color: #16a34a;
            box-shadow: 0 16px 32px rgba(22,163,74,0.28);
        }

        .dark-theme .vt-card {
            background: #1e293b; /* як у карток TRIAL */
            border-color: rgba(255,255,255,0.12);
        }

        .dark-theme .vt-card.vt-card-active {
            border-color: #22c55e;
            box-shadow: 0 0 0 2px rgba(34,197,94,0.4);
        }


        .vt-thumb-box {
            position: relative;
            width: 100%;
            aspect-ratio: 4/3;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 8px;
            background: #111827;
        }

        .vt-thumb {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            opacity: 0.9;
        }

        .vt-card-caption {
            font-size: 12px;
            font-weight: 600;
        }

        /* Буллети праворуч під картками */

        .vt-bullets {
            list-style: disc;
            padding-left: 18px;
            margin: 0;
            font-size: 13px;
            color: #4b5563;
        }
        .vt-bullets li + li {
            margin-top: 4px;
        }
        .dark-theme .vt-bullets {
            color: #e5e7eb;
        }

        /* Адаптив */

        @media (max-width: 960px) {
            .vt-grid {
                grid-template-columns: minmax(0,1fr);
            }
            .vt-gallery {
                grid-template-columns: repeat(3,minmax(0,1fr));
            }
        }

        @media (max-width: 640px) {
            .vt-inner {
                padding: 24px 18px 24px;
            }
            .vt-title {
                font-size: 20px;
            }
            .vt-gallery {
                grid-template-columns: repeat(2,minmax(0,1fr));
            }
        }

        @media (max-width: 480px) {
            .vt-gallery {
                grid-template-columns: minmax(0,1fr);
            }
        }


    </style>
</head>
<body>


<div class="page">

    <!-- TOPBAR (як в LAIT / eTsecutive) -->
    <header class="topbar">
        <div class="topbar-left">
            <div class="topbar-logo">
                <img src="/images/MT_logo_ua_Kubik.jpg" alt="MT logo">
            </div>
            <div>
                <div class="topbar-title">MT Україна</div>
                <div class="topbar-sub">Volpato AV2–AV6 · калькулятор</div>
            </div>
        </div>

        <div class="theme-toggle">
            <button id="themeToggle"><span></span> Темна тема</button>
        </div>
    </header>
    <!-- КАЛЬКУЛЯТОР VOLPATO -->
    <section class="section" id="volpato-calc">
        <div class="container">
            <div class="volpato-root">
                <h2 class="volpato-root-title">Volpato AV2–AV6 — розрахунок однієї рамки</h2>
                <p class="volpato-root-sub">
                    Крок 1 — вкажіть параметри рамки та скла. Крок 2 — натисніть <b>«Розрахувати»</b>.
                    Калькулятор покаже габарити скла, вагу, рекомендовану кількість петель та повний склад ціни.
                </p>

                <div class="volpato-calc-grid">
                    <!-- ВХІДНІ ДАНІ -->
                    <div class="volpato-panel volpato-panel--inputs">
                        <div class="vp-form-grid">
                            <div>
                                <h3 class="volpato-panel-title">1. Вхідні дані</h3>
                                <p class="volpato-panel-sub">
                                    Профіль AV2–AV6, розміри рамки по алюмінію, тип скла Busel, кількість, опції
                                    (збірка / упаковка, отвори під петлі / підвіси).
                                </p>

                                <div class="vp-field-group">
                                    <div class="vp-label-row">
                                        <label class="vp-label" for="vp-eur-rate">Курс EUR, грн</label>
                                        <div class="vp-hint">Зберігається локально</div>
                                    </div>
                                    <input id="vp-eur-rate" class="vp-input" type="number" step="0.01" value="49.5" />
                                </div>

                                <div class="vp-field-group">
                                    <div class="vp-label-row">
                                        <span class="vp-label">Колір AV2</span>
                                        <span class="vp-hint">Впливає на €/м профілю AV2</span>
                                    </div>
                                    <div class="vp-mode-row" id="vp-av2-color">
                                        <button type="button" data-color="black" class="vp-pill-btn active">AV2 — Black anod.</button>
                                        <button type="button" data-color="aluminium" class="vp-pill-btn">AV2 — Aluminium</button>
                                    </div>
                                </div>

                                <div class="vp-field-group">
                                    <div class="vp-label-row">
                                        <label class="vp-label" for="vp-profile">Профіль Volpato</label>
                                        <span class="vp-hint">Обмеження розмірів з техкарти</span>
                                    </div>
                                    <select id="vp-profile" class="vp-select">
                                        <option value="AV2">AV2 — рамка 45×22</option>
                                        <option value="AV3">AV3 — прихована ручка</option>
                                        <option value="AV4">AV4 — вертикаль 50×22 + траверси</option>
                                        <option value="AV5">AV5 — вертикаль 50×22</option>
                                        <option value="AV6">AV6 — тонкий кант 20×18</option>
                                    </select>
                                    <div class="vp-badges">
                                        <span class="vp-badge">Мін. ширина 250 мм</span>
                                        <span class="vp-badge">Макс. висота 2400 мм (AV6 — 1800)</span>
                                    </div>
                                </div>

                                <div class="vp-field-group">
                                    <div class="vp-label-row">
                                        <span class="vp-label">Габарити рамки по алюмінію, мм</span>
                                        <span class="vp-hint">Ширина × висота, кількість</span>
                                    </div>
                                    <div class="vp-row">
                                        <input id="vp-w" class="vp-input" type="number" step="1" value="455" placeholder="Ширина, мм" />
                                        <input id="vp-h" class="vp-input" type="number" step="1" value="705" placeholder="Висота, мм" />
                                        <input id="vp-qty" class="vp-input" type="number" step="1" value="1" placeholder="Кількість, шт" />
                                    </div>
                                </div>

                                <div class="vp-field-group">
                                    <div class="vp-label-row">
                                        <label class="vp-label" for="vp-glass">Скло (Busel, загартоване)</label>
                                        <span class="vp-hint">Матеріал + поліровка</span>
                                    </div>
                                    <select id="vp-glass" class="vp-select">
                                        <option value="extra_clear_4">Extra Clear 4 мм (діамант)</option>
                                        <option value="float_clear_4">Float прозоре 4 мм</option>
                                        <option value="dark_grey_4">Dark Grey 4 мм (тоноване)</option>
                                        <option value="satin_ec_4">Сатин Extra Clear 4 мм</option>
                                        <option value="fluted_4">Fluted 4 мм</option>
                                    </select>
                                </div>
                                <div class="vp-field-group">
                                    <div class="vp-label-row">
                                        <span class="vp-label">Тип термообробки</span>
                                        <span class="vp-hint">Впливає на коефіцієнт Busel</span>
                                    </div>
                                    <div class="vp-mode-row" id="vp-glass-temp">
                                        <button type="button" data-temp="tempered" class="vp-pill-btn active">Загартоване</button>
                                        <button type="button" data-temp="non_tempered" class="vp-pill-btn">Не загартоване</button>
                                    </div>
                                </div>

                                <div class="vp-field-group">
                                    <div class="vp-label-row">
                                        <span class="vp-label">Опції послуг</span>
                                        <span class="vp-hint">Впливають на блок «Послуги МТ»</span>
                                    </div>
                                    <div class="vp-check-row">
                                        <label class="vp-check">
                                            <input type="checkbox" id="vp-assembly" />
                                            <span>Збірка в МТ (замість упаковки/відвантаження)</span>
                                        </label>
                                        <label class="vp-check">
                                            <input type="checkbox" id="vp-hinge-holes" />
                                            <span>Отвори під петлі / підвіси (2 шт)</span>
                                        </label>
                                    </div>
                                </div>

                                <div class="vp-actions">
                                    <button type="button" class="vp-btn vp-btn-primary" id="vp-calc-btn">Розрахувати</button>
                                    <button type="button" class="vp-btn" id="vp-reset-btn">Скинути</button>
                                </div>
                            </div>

                            <!-- Короткий прев'ю-блок -->
                            <div>
                                <h3 class="volpato-panel-title">2. Прев’ю рамки та скла</h3>
                                <p class="volpato-panel-sub">
                                    Після розрахунку тут з’являться габарити скла (dimensionamento vetro),
                                    орієнтовна площа та вага скла.
                                </p>

                                <div class="vp-field-group">
                                    <div class="vp-label-row">
                                        <span class="vp-label">Габарити скла, мм</span>
                                        <span class="vp-hint">Ш × В, з урахуванням відступів Volpato</span>
                                    </div>
                                    <div class="vp-row">
                                        <input id="vp-wg" class="vp-input" type="text" readonly placeholder="Ширина скла" />
                                        <input id="vp-hg" class="vp-input" type="text" readonly placeholder="Висота скла" />
                                        <input id="vp-area" class="vp-input" type="text" readonly placeholder="Площа, м²" />
                                    </div>
                                </div>

                                <div class="vp-field-group">
                                    <div class="vp-label-row">
                                        <span class="vp-label">Вага та петлі</span>
                                        <span class="vp-hint">Розрахунок по товщині скла</span>
                                    </div>
                                    <div class="vp-row">
                                        <input id="vp-kg" class="vp-input" type="text" readonly placeholder="Вага скла, кг (≈)" />
                                        <input id="vp-hinges" class="vp-input" type="text" readonly placeholder="Рекомендовані петлі, шт" />
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>

                    <!-- РЕЗУЛЬТАТИ -->
                    <div class="volpato-results-wrapper" id="vp-results">
                        <div class="volpato-results-grid">
                            <!-- 1. Профіль + комплектуючі -->
                            <div class="volpato-panel">
                                <h3 class="volpato-panel-title">3. Профіль Volpato + комплект</h3>
                                <p class="volpato-panel-sub">
                                    Профіль (грн/м, з урахуванням курсу EUR), комплект кутників і гвинтів, модулі AV4/AV5
                                    та ущільнювач по периметру.
                                </p>

                                <div class="vp-row-text">
                                    <span>Довжина профілю з запасом, м</span>
                                    <span id="vp-Lm">—</span>
                                </div>
                                <div class="vp-row-text">
                                    <span>Ціна профілю, грн/м</span>
                                    <span id="vp-priceM">—</span>
                                </div>
                                <div class="vp-row-text">
                                    <span>Профіль (із запасом, закупка)</span>
                                    <span id="vp-costProfileRaw">—</span>
                                </div>
                                <div class="vp-row-text">
                                    <span>Комплект кутників + гвинти</span>
                                    <span id="vp-kitUAH">—</span>
                                </div>
                                <div class="vp-row-text">
                                    <span>Модуль AV4/AV5 (якщо застосовується)</span>
                                    <span id="vp-moduleUAH">—</span>
                                </div>
                                <div class="vp-row-text">
                                    <span>Ущільнювач, закупка, м</span>
                                    <span id="vp-gasketM">—</span>
                                </div>
                                <div class="vp-row-text vp-strong">
                                    <span>Разом профіль + комплект, грн / 1 шт</span>
                                    <span id="vp-compProfile">—</span>
                                </div>
                            </div>

                            <!-- 2. Скло Busel -->
                            <div class="volpato-panel">
                                <h3 class="volpato-panel-title">4. Скло</h3>
                                <p class="volpato-panel-sub">
                                    Матеріал  + поліровка .
                                </p>

                                <div class="vp-row-text">
                                    <span>Тип скла</span>
                                    <span id="vp-glassName">—</span>
                                </div>
                                <div class="vp-row-text">
                                    <span>Розрахункова площа (мін. 0,25 м²)</span>
                                    <span id="vp-areaFact">—</span>
                                </div>
                                <div class="vp-row-text">
                                    <span>Тариф Busel, грн/м² (зі сканом №20)</span>
                                    <span id="vp-glassPrice">—</span>
                                </div>
                                <div class="vp-row-text">
                                    <span>Коефіцієнт (термообробка)</span>

                                    <span id="vp-kArea">—</span>
                                </div>
                                <div class="vp-row-text">
                                    <span>Поліровка кромки, грн</span>
                                    <span id="vp-polishUAH">—</span>
                                </div>
                                <div class="vp-row-text vp-strong">
                                    <span>Скло (МТ, з маржею), грн / 1 шт</span>
                                    <span id="vp-compGlass">—</span>
                                </div>
                            </div>

                            <!-- 3. Послуги + підсумок -->
                            <div class="volpato-panel">
                                <h3 class="volpato-panel-title">5. Послуги МТ + підсумок</h3>
                                <p class="volpato-panel-sub">
                                    Порізка / свердління, збірка або упаковка (залежно від режиму), підсумкова ціна за 1 шт
                                    і за партію.
                                </p>

                                <table class="vp-table">
                                    <thead>
                                    <tr>
                                        <th>Категорія</th>
                                        <th class="vp-right">За 1 шт, грн</th>
                                        <th class="vp-right">За партію, грн</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>Профіль + комплект</td>
                                        <td class="vp-right" id="vp-compProfile1">—</td>
                                        <td class="vp-right" id="vp-compProfileSum">—</td>
                                    </tr>
                                    <tr>
                                        <td>Скло</td>
                                        <td class="vp-right" id="vp-compGlass1">—</td>
                                        <td class="vp-right" id="vp-compGlassSum">—</td>
                                    </tr>
                                    <tr>
                                        <td>Послуги МТ</td>
                                        <td class="vp-right" id="vp-compServices1">—</td>
                                        <td class="vp-right" id="vp-compServicesSum">—</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Разом за 1 шт</strong></td>
                                        <td class="vp-right" id="vp-costPer">—</td>
                                        <td class="vp-right"></td>
                                    </tr>
                                    <tr>
                                        <td><strong>Разом за партію</strong></td>
                                        <td></td>
                                        <td class="vp-right" id="vp-total">—</td>
                                    </tr>
                                    </tbody>
                                </table>

                                <div class="vp-row-text vp-strong">
                                    <span>Кількість у партії</span>
                                    <span id="vp-qty-out">—</span>
                                </div>
                                <div class="vp-row-text">
                                    <span>Орієнтовна ціна за 1 шт</span>
                                    <span id="vp-costPerTag">—</span>
                                </div>

                                <div class="vp-badges" style="margin-top: 10px;">
                                    <span class="vp-tag" id="vp-tag-profile">Профіль: —</span>
                                    <span class="vp-tag" id="vp-tag-glass">Скло: —</span>
                                    <span class="vp-tag" id="vp-tag-services">Послуги: —</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> <!-- /volpato-calc-grid -->
            </div>
        </div>
    </section>
</div>
</div>
</section>
</div>

<!-- ========= ТЕМА (як у головному hub) ========= -->
<script>
    const bodyEl = document.body;
    const themeBtn = document.getElementById('themeToggle');

    function applyTheme(mode) {
        const isDark = mode === 'dark';
        if (isDark) {
            bodyEl.classList.add('dark-theme');
            if (themeBtn) themeBtn.innerHTML = '<span></span> Світла тема';
        } else {
            bodyEl.classList.remove('dark-theme');
            if (themeBtn) themeBtn.innerHTML = '<span></span> Темна тема';
        }
    }

    const savedTheme = localStorage.getItem('mtHubTheme') || 'light';
    applyTheme(savedTheme);

    if (themeBtn) {
        themeBtn.addEventListener('click', () => {
            const newTheme = bodyEl.classList.contains('dark-theme') ? 'light' : 'dark';
            localStorage.setItem('mtHubTheme', newTheme);
            applyTheme(newTheme);
        });
    }
</script>

<!-- ========= Математика Volpato (як було) ========= -->
<script>
    // =========================
    //  Математика Volpato (на основі TSX)
    // =========================

    const GLASS_OFFSETS = { AV2: 8, AV3: 5, AV4: 13.5, AV5: 9, AV6: 4 };

    const EUR = {
        profile_per_m_base: { AV2: 21.17, AV3: 16.40, AV4: 18.46, AV5: 18.46, AV6: 8.43 },
        av4_modules_piece: {
            AV4_H397: 24.86, AV4_H447: 25.61, AV4_H497: 26.80, AV4_H547: 19.10, AV4_H597: 29.59
        },
        fasteners: { screw_m4x8: 0.07, screw_4_2x25: 0.59 },
        corners: { corner_av2_67x67: 1.02, corner_av6_37x37: 1.67 },
        gasket_per_m: { AV2: 1.26, AV3: 1.19, ANTE: 4.35 }
    };

    const UAH = {
        glass_m2: {
            float_clear_4:   { name: 'Скло Float прозоре 4 мм',                    price: 507.90 },
            extra_clear_4:   { name: 'Скло Extra-clear 4 мм (Діамант / low-iron)', price: 904.92 },
            dark_grey_4:     { name: 'Скло Dark Grey 4 мм (тоноване)',             price: 1683.00 },
            satin_ec_4:      { name: 'Скло Сатин Extra Clear 4 мм',                price: 1306.26 },
            fluted_4:        { name: 'Скло Fluted 4 мм',                           price: 2622.00 },
        },
        services: {
            cut_vertical_av5_av4: 50.00,
            cut_drill_one_frame: 270.00,
            assembly_upto_1000: 450.00,
            assembly_1001_2000: 600.00,
            assembly_2001_2200: 680.00,
            drill_35mm_26mm_hanger: 50.00,
            drill_square_profile: 50.00,
            ship_pack_upto_1000: 120.00,
            ship_pack_1001_2000: 180.00,
            ship_pack_2001_2500: 230.00,
            edge_polish_per_m: 100.00
        },
        config: {
            wasteK: 1.03,
            densityGlass_t_per_m3: 2.5
        }
    };

    function pickAv4Module(width) {
        const sizes = [397, 447, 497, 547, 597];
        const s = sizes.reduce((b, c) => (c <= width && c > b ? c : b), 0) || sizes[0];
        const code = 'AV4_H' + s;
        const eur = EUR.av4_modules_piece[code] || 0;
        return { code, size: s, eur };
    }

    function calcGlassAreaEffective(profile, Wmm, Hmm) {
        const off = GLASS_OFFSETS[profile] ?? 3;
        const wg = Math.max(0, Wmm - off);
        const hg = Math.max(0, Hmm - off);
        return { wg, hg, area: (wg * hg) / 1_000_000 };
    }

    // Коефіцієнт Busel за площею для ГАРТОВАНОГО скла (табл. №2)
    function areaCoefBuselTempered(area) {
        // до 0,25 м² +100% → множимо на 2, але площу вже беремо як 0,25
        if (area <= 0.25) return 2.0;
        if (area >= 7.5) return 2.0;   // від 7,5 м² +100%
        if (area >= 6.5) return 1.5;   // 6,5–7,5 м² +50%
        if (area >= 5.5) return 1.3;   // 5,5–6,5 м² +30%
        if (area >= 4.5) return 1.2;   // 4,5–5,5 м² +20%
        if (area >= 3.5) return 1.1;   // 3,5–4,5 м² +10%
        return 1.0;                    // інші площі — без націнки
    }


    function glassWeight(area, tmm) {
        return area * UAH.config.densityGlass_t_per_m3 * tmm;
    }

    function fmt(x, digits = 2) {
        if (!isFinite(x)) return '—';
        return x.toLocaleString('uk-UA', { minimumFractionDigits: digits, maximumFractionDigits: digits });
    }

    document.addEventListener('DOMContentLoaded', () => {
        const eurInput = document.getElementById('vp-eur-rate');
        const av2ColorBlock = document.getElementById('vp-av2-color');
        const profileEl = document.getElementById('vp-profile');
        const wEl = document.getElementById('vp-w');
        const hEl = document.getElementById('vp-h');
        const qtyEl = document.getElementById('vp-qty');
        const glassEl = document.getElementById('vp-glass');
        const assemblyEl = document.getElementById('vp-assembly');
        // Перемикач типу термообробки
        const glassTempBlock = document.getElementById('vp-glass-temp');
        let glassTemp = 'tempered'; // за замовчуванням — загартоване

        if (glassTempBlock) {
            glassTempBlock.querySelectorAll('button').forEach(btn => {
                btn.addEventListener('click', () => {
                    glassTemp = btn.getAttribute('data-temp') || 'tempered';
                    glassTempBlock.querySelectorAll('button').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                });
            });
        }

        const hingeHolesEl = document.getElementById('vp-hinge-holes');


        glassTempBlock.querySelectorAll('button').forEach(btn => {
            btn.addEventListener('click', () => {
                glassTemp = btn.getAttribute('data-temp');
                glassTempBlock.querySelectorAll('button').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });

        const resultsWrap = document.getElementById('vp-results');

        const wgEl = document.getElementById('vp-wg');
        const hgEl = document.getElementById('vp-hg');
        const areaEl = document.getElementById('vp-area');
        const kgEl = document.getElementById('vp-kg');
        const hingesEl = document.getElementById('vp-hinges');

        const LmEl = document.getElementById('vp-Lm');
        const priceMEl = document.getElementById('vp-priceM');
        const costProfileRawEl = document.getElementById('vp-costProfileRaw');
        const kitUAHEl = document.getElementById('vp-kitUAH');
        const moduleUAHEl = document.getElementById('vp-moduleUAH');
        const gasketMEl = document.getElementById('vp-gasketM');
        const compProfileEl = document.getElementById('vp-compProfile');

        const glassNameEl = document.getElementById('vp-glassName');
        const areaFactEl = document.getElementById('vp-areaFact');
        const glassPriceEl = document.getElementById('vp-glassPrice');
        const kAreaEl = document.getElementById('vp-kArea');
        const polishUAHEl = document.getElementById('vp-polishUAH');
        const compGlassEl = document.getElementById('vp-compGlass');

        const compProfile1El = document.getElementById('vp-compProfile1');
        const compProfileSumEl = document.getElementById('vp-compProfileSum');
        const compGlass1El = document.getElementById('vp-compGlass1');
        const compGlassSumEl = document.getElementById('vp-compGlassSum');
        const compServices1El = document.getElementById('vp-compServices1');
        const compServicesSumEl = document.getElementById('vp-compServicesSum');
        const costPerEl = document.getElementById('vp-costPer');
        const totalEl = document.getElementById('vp-total');
        const qtyOutEl = document.getElementById('vp-qty-out');
        const costPerTagEl = document.getElementById('vp-costPerTag');

        const tagProfileEl = document.getElementById('vp-tag-profile');
        const tagGlassEl = document.getElementById('vp-tag-glass');
        const tagServicesEl = document.getElementById('vp-tag-services');

        const calcBtn = document.getElementById('vp-calc-btn');
        const resetBtn = document.getElementById('vp-reset-btn');

        // режим AV2 color
        let av2Color = 'black';
        av2ColorBlock.querySelectorAll('button').forEach(btn => {
            btn.addEventListener('click', () => {
                av2Color = btn.getAttribute('data-color') || 'black';
                av2ColorBlock.querySelectorAll('button').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });

        function calcOnce() {
            const eurRate = parseFloat(eurInput.value.replace(',', '.')) || 0;
            const profile = profileEl.value;
            let w = parseFloat(wEl.value.replace(',', '.')) || 0;
            let h = parseFloat(hEl.value.replace(',', '.')) || 0;
            const qty = Math.max(1, parseInt(qtyEl.value, 10) || 1);
            const glassKey = glassEl.value;
            const assembly = assemblyEl.checked;
            const hingeHoles = hingeHolesEl.checked;

            // Обмеження профілю (спрощено, як у RULES)
            const rules = {
                AV2: { minW: 250, maxW: 600, minH: 300, maxH: 2400 },
                AV3: { minW: 250, maxW: 600, minH: 300, maxH: 2400 },
                AV4: { minW: 250, maxW: 600, minH: 300, maxH: 2400 },
                AV5: { minW: 250, maxW: 600, minH: 300, maxH: 2400 },
                AV6: { minW: 250, maxW: 500, minH: 300, maxH: 1800 },
            };
            const r = rules[profile];
            if (w < r.minW) w = r.minW;
            if (w > r.maxW) w = r.maxW;
            if (h < r.minH) h = r.minH;
            if (h > r.maxH) h = r.maxH;
            wEl.value = String(Math.round(w));
            hEl.value = String(Math.round(h));

            // грн/м для профілів (з урахуванням кольору AV2)
            const profileUAHperM = {};
            Object.keys(EUR.profile_per_m_base).forEach(k => {
                let eur = EUR.profile_per_m_base[k];
                if (k === 'AV2' && av2Color === 'aluminium') eur = 17.82;
                profileUAHperM[k] = eur * eurRate;
            });

            // === Профіль ===
            const Lm = Math.ceil((2 * (w + h) + 20) / 10) / 100; // невеликий запас
            const priceM = profileUAHperM[profile] || 0;
            const costProfileRaw = Lm * priceM * (UAH.config.wasteK || 1);

// === Скло ===
            const eff = calcGlassAreaEffective(profile, w, h);
            const wg = eff.wg;
            const hg = eff.hg;
            const area = eff.area;

            const g = UAH.glass_m2[glassKey] || { name: glassKey, price: 0 };

// Busel рахує мінімум 0,25 м² → площу завжди підтягуємо до 0,25
            const areaFact = Math.max(area, 0.25);

// Коефіцієнт за площею:
            let kArea = 1.0; // базово — без націнки
            if (glassTemp === 'tempered') {
                // тільки для загартованого включаємо таблицю №2
                kArea = areaCoefBuselTempered(areaFact);
            }

            const material = areaFact * g.price * kArea;
            const edgeLenM = (2 * (wg + hg)) / 1000;
            const polish = edgeLenM * (UAH.services.edge_polish_per_m || 0);
            const mtNet = (material + polish) * 0.85;
            const costGlass = mtNet * 1.30;


            // === Комплект/модуль ===
            const cornerEUR = profile === 'AV6'
                ? EUR.corners.corner_av6_37x37
                : EUR.corners.corner_av2_67x67;
            const kitUAH = (4 * cornerEUR + 8 * EUR.fasteners.screw_m4x8) * eurRate;

            let moduleInfo = null;
            let costModule = 0;
            if (profile === 'AV4' || profile === 'AV5') {
                moduleInfo = pickAv4Module(w);
                costModule = (moduleInfo.eur || 0) * eurRate;
            }

            // === Ущільнювач ===
            const perimM = (2 * (w + h)) / 1000;
            let gasketPerMEUR =
                profile === 'AV2' ? EUR.gasket_per_m.AV2 :
                    profile === 'AV3' ? EUR.gasket_per_m.AV3 :
                        profile === 'AV6' ? EUR.gasket_per_m.AV2 : 0;
            const gasketMult = (profile === 'AV4' || profile === 'AV5') ? 3.0 : 2.5;
            const gasketPurchasedM = Math.ceil((perimM / gasketMult) - 1e-9) * gasketMult || 0;
            const costGasket = gasketPurchasedM * gasketPerMEUR * eurRate;

            // === Послуги ===
            let costWork = UAH.services.cut_drill_one_frame || 0;
            if (profile === 'AV4' || profile === 'AV5') {
                costWork += UAH.services.cut_vertical_av5_av4 || 0;
            }
            if (hingeHoles) {
                const perHole = profile === 'AV6'
                    ? UAH.services.drill_square_profile
                    : UAH.services.drill_35mm_26mm_hanger;
                costWork += 2 * (perHole || 0);
            }
            if (assembly) {
                if (h <= 1000) costWork += UAH.services.assembly_upto_1000 || 0;
                else if (h <= 2000) costWork += UAH.services.assembly_1001_2000 || 0;
                else costWork += UAH.services.assembly_2001_2200 || 0;
            } else {
                if (h <= 1000) costWork += UAH.services.ship_pack_upto_1000 || 0;
                else if (h <= 2000) costWork += UAH.services.ship_pack_1001_2000 || 0;
                else costWork += UAH.services.ship_pack_2001_2500 || 0;
            }

            // === Категорії та підсумки ===
            const compProfile = costProfileRaw + kitUAH + costModule + costGasket;
            const compGlass = costGlass;
            const compServices = costWork;
            const costPer = compProfile + compGlass + compServices;
            const total = costPer * qty;

            const tmm = glassKey.indexOf('_6') !== -1 ? 6 : 4;
            const kg = glassWeight(area, tmm);
            const hinges = kg <= 7 ? 2 : kg <= 12 ? 3 : 4;

            // === Вивід полів прев'ю ===
            wgEl.value = wg ? fmt(wg, 0) : '—';
            hgEl.value = hg ? fmt(hg, 0) : '—';
            areaEl.value = area ? fmt(area, 3) : '—';
            kgEl.value = kg ? fmt(kg, 1) : '—';
            hingesEl.value = hinges ? String(hinges) : '—';

            // === Профіль + комплект ===
            LmEl.textContent = fmt(Lm, 2);
            priceMEl.textContent = fmt(priceM, 2);
            costProfileRawEl.textContent = fmt(costProfileRaw, 0);
            kitUAHEl.textContent = fmt(kitUAH, 0);
            moduleUAHEl.textContent = costModule ? fmt(costModule, 0) + (moduleInfo ? ' (' + moduleInfo.code + ')' : '') : '—';
            gasketMEl.textContent = fmt(gasketPurchasedM, 2) + ' м · ' + fmt(costGasket, 0) + ' грн';
            compProfileEl.textContent = fmt(compProfile, 0);

            // === Скло ===
            glassNameEl.textContent = g.name;
            areaFactEl.textContent = fmt(areaFact, 3) + ' м²';
            glassPriceEl.textContent = fmt(g.price, 2);
            kAreaEl.textContent = fmt(kArea, 2);
            polishUAHEl.textContent = fmt(polish, 0);
            compGlassEl.textContent = fmt(compGlass, 0);

            // === Таблиця послуг + підсумок ===
            const qSum = qty;
            compProfile1El.textContent = fmt(compProfile, 0);
            compProfileSumEl.textContent = fmt(compProfile * qSum, 0);
            compGlass1El.textContent = fmt(compGlass, 0);
            compGlassSumEl.textContent = fmt(compGlass * qSum, 0);
            compServices1El.textContent = fmt(compServices, 0);
            compServicesSumEl.textContent = fmt(compServices * qSum, 0);

            costPerEl.textContent = fmt(costPer, 0);
            totalEl.textContent = fmt(total, 0);
            qtyOutEl.textContent = String(qty);
            costPerTagEl.textContent = fmt(costPer, 0) + ' грн/шт ';

            tagProfileEl.textContent = 'Профіль: ' + fmt(compProfile, 0) + ' грн';
            tagGlassEl.textContent   = 'Скло: ' + fmt(compGlass, 0) + ' грн';
            tagServicesEl.textContent= 'Послуги: ' + fmt(compServices, 0) + ' грн';

            resultsWrap.classList.add('active');
        }

        calcBtn.addEventListener('click', calcOnce);

        resetBtn.addEventListener('click', () => {
            profileEl.value = 'AV2';
            wEl.value = '455';
            hEl.value = '705';
            qtyEl.value = '1';
            glassEl.value = 'extra_clear_4';
            assemblyEl.checked = false;
            hingeHolesEl.checked = false;
            resultsWrap.classList.remove('active');
        });
        // === Технічні карти Volpato (підсвітка активної) ===
        const techCards = document.querySelectorAll('.vt-card');
        if (techCards.length) {
            techCards.forEach(card => {
                card.addEventListener('click', () => {
                    techCards.forEach(c => c.classList.remove('vt-card-active'));
                    card.classList.add('vt-card-active');
                });
            });
        }


    });
</script>
</body>
</html>


